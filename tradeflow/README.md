# Primary tables: trade, factor, industry

Table naming designed for 3rd graders:

**The trade_id field** in trade.csv relates 5 values (year, region1, region2, industry1, industry2) to multiple impact factors for each trade row.

**The factor_id field** represents 721 unique impacts applied to each annual trade row (for imports, exports and domestic).

Trade is traditionally called flow, but the term flow lacks clarity when relating annual trade rows to multiple factors.

Later, the 6-character "commodity" sectors can reside in the 5-character "trade" tables, or in tables starting with "commodity".

## Processing Command

To process the 9 CSV files listed in config.yaml, run the automated batch processing:

```bash
python main.py
```

This command generates the following CSV files for each country/tradeflow combination:
- `factor.csv` - Environmental factor definitions (721 factors)
- `industry.csv` - Industry sector mapping  
- `trade.csv` - Core trade flows (trade_id, year, region1, region2, industry1, industry2, amount)
- `trade_factor.csv` - Environmental coefficients (120 selected factors for imports/exports)
- `trade_factor_lg.csv` - All environmental coefficients (721 factors for domestic flows)
- `trade_impact.csv` - Aggregated environmental impacts
- `trade_resource.csv` - Resource use analysis
- `trade_material.csv` - Material flow analysis  
- `trade_employment.csv` - Employment impact analysis

**Note:** `trade.csv` is generated by `trade.py` (lines 587-589) and contains the core trade flow data with columns: trade_id, year, region1, region2, industry1, industry2, amount.

## Areas to Fix/Revise

- [ ] Update CLAUDE.md section headers to match actual processing pipeline (trade.py is now the primary script)
- [ ] Fix inconsistent file naming references between config.yaml and documentation
- [ ] Clarify the relationship between trade_factor.csv (120 factors) vs trade_factor_lg.csv (721 factors) 
- [ ] Update processing time estimates in CLAUDE.md based on current script performance
- [ ] Remove references to deleted scripts (industryflow_finaldemand.py, industryflow_factor.py, create_full_trade_factor.py)
- [ ] Verify column descriptions match actual CSV output formats
- [ ] Add error handling documentation for common processing failures
- [ ] Update timeout configuration section to reflect current batch processing limits
